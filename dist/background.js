(()=>{"use strict";const e=[/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}imgur.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/,/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}youtube.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/,/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}reddit.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/,/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}messenger.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/,/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}linkedin.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/,/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{0,256}news.google.[-a-zA-Z0-9@:%._\+~#=]{1,256}(\/)?/];var t=!0,s=null;function a(e){var t={type:"START_BLOCKING_TIMESTAMP",timestamp:e};chrome.runtime.sendMessage(t)}function o(e){var t={type:"IS_BLOCKING_STATUS",isBlocking:e};chrome.runtime.sendMessage(t)}chrome.tabs.onUpdated.addListener((function(s,a,o){if(o.url&&t)for(var n=0,i=e;n<i.length;n++)if(i[n].test(o.url)){chrome.tabs.remove(s,(function(){console.log("removed",s,o.url)}));break}})),chrome.runtime.onMessage.addListener((function(e){switch(e.type){case"REQ_IS_BLOCKING_STATUS":n=o,chrome.storage.local.get("isBlocking",(function(e){t=!!e.isBlocking,n(t)}));break;case"TOGGLE_IS_BLOCKING":t=e.isBlocking,chrome.storage.local.set({isBlocking:t}),o(t);break;case"REQ_START_BLOCKING_TIMESTAMP":!function(e){chrome.storage.local.get("startBlockingTimestamp",(function(t){s=t.startBlockingTimestamp?t.startBlockingTimestamp:null,e(s)}))}(a);break;case"SET_START_BLOCKING_TIMESTAMP":chrome.storage.local.set({startBlockingTimestamp:e.timestamp}),setTimeout((function(){a(null),o(!1),chrome.storage.local.set({startBlockingTimestamp:null}),chrome.storage.local.set({isBlocking:!1})}),Math.abs(e.timestamp.getTime()-Date.now()))}var n}))})();